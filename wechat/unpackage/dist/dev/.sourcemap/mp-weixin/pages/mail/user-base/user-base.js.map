{"version":3,"sources":["uni-app:///main.js","webpack:///D:/百度网盘/wechat/pages/mail/user-base/user-base.vue?7ed8","webpack:///D:/百度网盘/wechat/pages/mail/user-base/user-base.vue?f138","webpack:///D:/百度网盘/wechat/pages/mail/user-base/user-base.vue?a6b5","webpack:///D:/百度网盘/wechat/pages/mail/user-base/user-base.vue?14c3","uni-app:///pages/mail/user-base/user-base.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/mail/user-base/user-base.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/mail/user-base/user-base.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-base.vue?vue&type=template&id=df6b3890&\"\nvar renderjs\nimport script from \"./user-base.vue?vue&type=script&lang=js&\"\nexport * from \"./user-base.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mail/user-base/user-base.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-base.vue?vue&type=template&id=df6b3890&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-base.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-base.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"page\">\n\t\t<!-- 导航栏 -->\r\n\t\t<free-nav-bar showBack :showRight=\"detail.friend\" bgColor=\"bg-white\">\r\n\t\t\t<view slot=\"right\">\r\n\t\t\t\t<free-icon-button \r\n\t\t\t\t:icon=\"'\\ue6fd'\" v-if=\"detail.friend\"\r\n\t\t\t\t@click=\"openAction\"></free-icon-button>\r\n\t\t\t</view>\r\n\t\t</free-nav-bar>\r\n\t\t<view class=\"px-3 py-4 flex align-center bg-white border-bottom\">\r\n\t\t\t<free-avater :src=\"detail.avatar\" size=\"120\"></free-avater>\r\n\t\t\t<view class=\"flex flex-column ml-3 flex-1\">\r\n\t\t\t\t<view class=\"flex align-center justify-between\">\r\n\t\t\t\t\t<text class=\"font-lg font-weight-bold mb-1\">{{detail.nickname}}</text>\r\n\t\t\t\t\t<image v-if=\"detail.star\" src=\"/static/images/star.png\"\r\n\t\t\t\t\tstyle=\"width: 40rpx;height: 40rpx;\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"font-md text-light-muted\">账号：{{detail.username}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<free-list-item v-if=\"detail.friend\" showRight :showLeftIcon=\"false\" \r\n\t\t@click=\"navigate(tagPath)\">\r\n\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t<text class=\"font-md text-dark mr-3\">标签</text>\r\n\t\t\t\t<text class=\"font-md text-light-muted mr-2\"\r\n\t\t\t\tv-for=\"(item,index) in detail.tags\" :key=\"index\">{{item}}</text>\r\n\t\t\t\t<text class=\"font-md text-light-muted\" v-if=\"detail.tags.length < 1\">未设置</text>\r\n\t\t\t</view>\r\n\t\t</free-list-item>\r\n\t\t<free-divider></free-divider>\r\n\t\t<free-list-item v-if=\"detail.friend\" showRight :showLeftIcon=\"false\" @click=\"openMoments\">\r\n\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t<text class=\"font-md text-dark mr-3\">朋友圈</text>\r\n\t\t\t\t<template v-if=\"detail.moments[0]\">\r\n\t\t\t\t\t<text v-if=\"detail.moments[0].content && !detail.moments[0].image.length\" class=\"font text-secondary\">{{detail.moments[0].content}}</text>\r\n\t\t\t\t\t<image v-for=\"(item,index) in detail.moments[0].image\" :key=\"index\" :src=\"item\" style=\"width: 90rpx;height: 90rpx;\"\r\n\t\t\t\t\tclass=\"mr-2\"></image>\r\n\t\t\t\t</template>\r\n\t\t\t</view>\r\n\t\t</free-list-item>\r\n\t\t<free-list-item title=\"更多信息\" showRight :showLeftIcon=\"false\"></free-list-item>\r\n\t\t<free-divider></free-divider>\r\n\t\t<view class=\"py-3 flex align-center justify-center bg-white\"\r\n\t\thover-class=\"bg-light\" v-if=\"detail.friend\" @click=\"doEvent\">\r\n\t\t\t<text class=\"iconfont text-primary mr-1\" \r\n\t\t\tv-if=\"!detail.isblack\">&#xe64e;</text>\r\n\t\t\t<text class=\"font-md text-primary\">{{detail.isblack ? '移出黑名单' : '发信息'}}</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"py-3 flex align-center justify-center bg-white\"\r\n\t\thover-class=\"bg-light\" v-else \r\n\t\t@click=\"navigate(addFriend)\">\r\n\t\t\t<text class=\"font-md text-primary\">添加好友</text>\r\n\t\t</view>\r\n\t\t<!-- 操作菜单 -->\r\n\t\t<free-popup ref=\"action\" bottom transformOrigin=\"center bottom\" maskColor>\r\n\t\t\t<scroll-view scroll-y=\"true\" style=\"height: 580rpx;\" \r\n\t\t\tclass=\"bg-white\" :show-scrollbar=\"false\">\r\n\t\t\t\t<free-list-item v-for=\"(item,index) in actions\" :key=\"index\" :title=\"item.title\" :showRight=\"false\" :border=\"false\" @click=\"popupEvent(item)\">\r\n\t\t\t\t\t<text slot=\"icon\" class=\"iconfont font-lg py-1\">{{item.icon}}</text>\r\n\t\t\t\t</free-list-item>\r\n\t\t\t</scroll-view>\r\n\t\t</free-popup>\r\n\t\t\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\timport freeNavBar from \"@/components/free-ui/free-nav-bar.vue\"\r\n\timport freeAvater from '@/components/free-ui/free-avater.vue';\r\n\timport freeDivider from \"@/components/free-ui/free-divider.vue\"\r\n\timport freeListItem from \"@/components/free-ui/free-list-item.vue\"\r\n\timport freeIconButton from '@/components/free-ui/free-icon-button.vue';\r\n\timport freePopup from '@/components/free-ui/free-popup.vue';\r\n\timport auth from '@/common/mixin/auth.js';\r\n\timport $H from '@/common/free-lib/request.js';\r\n\timport { mapState } from 'vuex'\r\n\t\n\texport default {\r\n\t\tmixins:[auth],\r\n\t\tcomponents: {\r\n\t\t\tfreeNavBar,\r\n\t\t\tfreeAvater,\r\n\t\t\tfreeDivider,\r\n\t\t\tfreeListItem,\r\n\t\t\tfreeIconButton,\r\n\t\t\tfreePopup\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tdetail:{\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tusername: \"\",\r\n\t\t\t\t\tnickname: \"\",\r\n\t\t\t\t\tavatar: \"\",\r\n\t\t\t\t\tsex: \"\",\r\n\t\t\t\t\tsign: \"\",\r\n\t\t\t\t\tarea: \"\",\r\n\t\t\t\t\tfriend: false,\r\n\t\t\t\t\tlookme: 1,\r\n\t\t\t\t\tlookhim: 1,\r\n\t\t\t\t\tstar: 0,\r\n\t\t\t\t\tisblack: 0,\r\n\t\t\t\t\ttags: []\r\n\t\t\t\t},\n\t\t\t}\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tif(!e.user_id){\r\n\t\t\t\treturn this.backToast()\r\n\t\t\t}\r\n\t\t\tthis.detail.id = e.user_id\r\n\t\t\t\r\n\t\t\tuni.$on('saveRemarkTag',(e)=>{\r\n\t\t\t\tthis.nickname = e.nickname\r\n\t\t\t\tthis.tagList = e.tagList\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// 获取当前用户资料\r\n\t\t\tthis.getData()\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tlist:state=>state.user.chatList,\r\n\t\t\t\ttotalNoreadnum:state=>state.user.totalNoreadnum,\r\n\t\t\t\tchat:state=>state.user.chat\r\n\t\t\t}),\r\n\t\t\taddFriend() {\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tfriend_id:this.detail.id,\r\n\t\t\t\t\tnickname:this.detail.nickname,\r\n\t\t\t\t\tlookme:typeof this.detail.lookme === 'number' ? this.detail.lookme : 1,\r\n\t\t\t\t\tlookhim:typeof this.detail.lookhim === 'number' ? this.detail.lookhim : 1\r\n\t\t\t\t}\r\n\t\t\t\treturn 'mail/add-friend/add-friend?params='+JSON.stringify(obj)\r\n\t\t\t},\r\n\t\t\ttagPath(){\r\n\t\t\t\treturn \"mail/user-remark-tag/user-remark-tag?params=\"+JSON.stringify({\r\n\t\t\t\t\t\tuser_id:this.detail.id,\r\n\t\t\t\t\t\tnickname:this.detail.nickname,\r\n\t\t\t\t\t\ttags:this.detail.tags ? this.detail.tags.join(',') : ''\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tactions(){\r\n\t\t\t\treturn [{\r\n\t\t\t\t\ticon:\"\\ue6b3\",\r\n\t\t\t\t\ttitle:\"设置备注和标签\",\r\n\t\t\t\t\ttype:\"navigate\",\r\n\t\t\t\t\tpath:this.tagPath\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon:\"\\ue613\",\r\n\t\t\t\t\ttitle:\"把他推荐给朋友\",\r\n\t\t\t\t\ttype:\"navigate\",\r\n\t\t\t\t\tpath:\"chat/chat-list/chat-list?params=\"+encodeURIComponent(JSON.stringify({\r\n\t\t\t\t\t\ttype: \"card\",\r\n\t\t\t\t\t\tdata: this.detail.nickname || this.detail.username,\r\n\t\t\t\t\t\toptions: {\r\n\t\t\t\t\t\t\tavatar: this.detail.avatar,\r\n\t\t\t\t\t\t\tid: this.detail.id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}))\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon:\"\\ue6b0\",\r\n\t\t\t\t\ttitle:this.detail.star ? '取消星标好友' : \"设为星标朋友\",\r\n\t\t\t\t\ttype:\"event\",\r\n\t\t\t\t\tevent:\"setStar\"\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon:\"\\ue667\",\r\n\t\t\t\t\ttitle:\"设置朋友圈和动态权限\",\r\n\t\t\t\t\ttype:\"navigate\",\r\n\t\t\t\t\tpath:\"mail/user-moments-auth/user-moments-auth?user_id=\"+this.detail.id +\"&params=\"+JSON.stringify({\r\n\t\t\t\t\t\tlookme:this.detail.lookme,\r\n\t\t\t\t\t\tlookhim:this.detail.lookhim,\r\n\t\t\t\t\t})\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon:\"\\ue638\",\r\n\t\t\t\t\ttitle:this.detail.isblack ? '移出黑名单' : \"加入黑名单\",\r\n\t\t\t\t\ttype:\"event\",\r\n\t\t\t\t\tevent:\"setBlack\"\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon:\"\\ue61c\",\r\n\t\t\t\t\ttitle:\"投诉\",\r\n\t\t\t\t\ttype:\"navigate\",\r\n\t\t\t\t\tpath:\"mail/user-report/user-report?params=\"+JSON.stringify({\r\n\t\t\t\t\t\tuser_id:this.detail.id,\r\n\t\t\t\t\t\ttype:\"user\"\r\n\t\t\t\t\t})\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon:\"\\ue638\",\r\n\t\t\t\t\ttitle:\"删除\",\r\n\t\t\t\t\ttype:\"event\",\r\n\t\t\t\t\tevent:\"deleteItem\"\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tuni.$off('saveRemarkTag')\r\n\t\t},\n\t\tmethods: {\r\n\t\t\tgetData(){\r\n\t\t\t\t$H.get('/friend/read/'+this.detail.id).then(res=>{\r\n\t\t\t\t\tif(!res){\r\n\t\t\t\t\t\treturn this.backToast('该用户不存在')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(res.moments && res.moments[0]){\r\n\t\t\t\t\t\tres.moments[0].image = res.moments[0].image.split(',')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.detail = res\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 打开操作菜单\n\t\t\topenAction(){\r\n\t\t\t\tthis.$refs.action.show()\r\n\t\t\t},\r\n\t\t\t// 跳转\r\n\t\t\tnavigate(path){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/'+path,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 操作菜单事件 \r\n\t\t\tpopupEvent(e){\r\n\t\t\t\tif(!e.type){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tswitch (e.type){\r\n\t\t\t\t\tcase 'navigate':\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/'+e.path\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'event':\r\n\t\t\t\t\tthis[e.event](e)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t// 关闭弹出层\r\n\t\t\t\t\tthis.$refs.action.hide()\r\n\t\t\t\t},300)\r\n\t\t\t},\r\n\t\t\t// 删除好友\r\n\t\t\tdeleteItem(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: '是否要删除该好友？',\r\n\t\t\t\t\tsuccess: (res)=> {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t$H.post('/friend/destroy',{\r\n\t\t\t\t\t\t\t\tfriend_id:this.detail.id\r\n\t\t\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '删除好友成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\turl:\"/pages/tabbar/index/index\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 设为星标\r\n\t\t\tsetStar(e){\r\n\t\t\t\tlet star = this.detail.star == 0 ? 1 : 0\r\n\t\t\t\t$H.post('/friend/setstar/'+this.detail.id,{\r\n\t\t\t\t\tstar\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.detail.star = star\r\n\t\t\t\t\te.title = this.detail.star ? '取消星标好友' : \"设为星标朋友\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 加入黑名单\r\n\t\t\tsetBlack(e){\r\n\t\t\t\tlet msg = this.detail.isblack ? '移出黑名单' : '加入黑名单'\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: '是否要'+msg+'？',\r\n\t\t\t\t\tsuccess: (res)=> {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tlet isblack = this.detail.isblack == 0 ? 1 : 0\r\n\t\t\t\t\t\t\t$H.post('/friend/setblack/'+this.detail.id,{\r\n\t\t\t\t\t\t\t\tisblack\r\n\t\t\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t\t\tthis.detail.isblack = isblack\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: msg+'成功',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdoEvent(){\r\n\t\t\t\tif(this.detail.isblack){\r\n\t\t\t\t\treturn this.setBlack()\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../chat/chat/chat?params='+encodeURIComponent(JSON.stringify({\r\n\t\t\t\t\t\tid:this.detail.id,\r\n\t\t\t\t\t\tname:this.detail.nickname ? this.detail.nickname : this.detail.username,\r\n\t\t\t\t\t\tavatar:this.detail.avatar,\r\n\t\t\t\t\t\tchat_type:\"user\",\r\n\t\t\t\t\t})),\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(this.chat)\r\n\t\t\t\tthis.chat.readChatItem(this.detail.id,'user')\r\n\t\t\t},\r\n\t\t\topenMoments(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../find/moments/moments?key=moment&params='+encodeURIComponent(JSON.stringify({\r\n\t\t\t\t\t\tid:this.detail.id,\r\n\t\t\t\t\t\tname:this.detail.nickname || this.detail.username,\r\n\t\t\t\t\t\tavatar:this.detail.avatar\r\n\t\t\t\t\t})),\r\n\t\t\t\t});\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}