{"version":3,"sources":["uni-app:///main.js","webpack:///D:/百度网盘/wechat/pages/find/add-moment/add-moment.vue?7e2f","webpack:///D:/百度网盘/wechat/pages/find/add-moment/add-moment.vue?eae7","webpack:///D:/百度网盘/wechat/pages/find/add-moment/add-moment.vue?1fed","webpack:///D:/百度网盘/wechat/pages/find/add-moment/add-moment.vue?5e36","uni-app:///pages/find/add-moment/add-moment.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,gH,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;;;AAGzD;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsnB,CAAgB,onBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4C1oB,mG;AACA;AACA;AACA,0BADA;AAEA,kCAFA;AAGA,8BAHA;AAIA,oCAJA;AAKA,0BALA,EADA;;AAQA,MARA,kBAQA;AACA;AACA,iBADA;AAEA,mBAFA;AAGA,mBAHA;AAIA,kBAJA;;AAMA,oBANA;;AAQA;AACA,gBADA;AAEA,aAFA,EARA;;;AAaA,GAtBA;AAuBA,QAvBA,kBAuBA,CAvBA,EAuBA;AACA;AACA;AACA,GA1BA;AA2BA,WA3BA,uBA2BA;AACA;AACA,GA7BA;AA8BA;AACA,WADA,qBACA;AACA;AACA,iBADA;AAEA,kBAFA;AAGA,oBAHA;AAIA,sBAJA;;AAMA;AACA;AACA;AACA;AACA;AACA,KAbA;AAcA,WAdA,qBAcA;AACA;AACA;AACA;AACA;AACA;AACA,KApBA,EA9BA;;AAoDA;AACA,cADA,sBACA,CADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KARA;AASA,cATA,wBASA;AACA;AACA,+CADA;;AAGA,KAbA;AAcA,WAdA,qBAcA;AACA;AACA,4CADA;;AAGA,KAlBA;AAmBA,UAnBA,oBAmBA;AACA;AACA,6BADA;AAEA,uCAFA;AAGA,2DAHA;AAIA,uBAJA;AAKA,oBALA;AAMA,qFANA;AAOA,yBAPA;AAQA,UARA,CAQA;AACA;AACA,uBADA;AAEA,sBAFA;;AAIA;AACA,kBADA;;AAGA,OAhBA;AAiBA,KArCA;AAsCA;AACA,eAvCA,uBAuCA,IAvCA,EAuCA;AACA;AACA,KAzCA;AA0CA;AACA,eA3CA,yBA2CA;AACA;AACA,uBADA;AAEA;AACA;AACA,oCADA;AAEA;AACA;AACA,WAJA,EAIA,IAJA,CAIA;AACA;AACA,sBADA;AAEA,mFAFA;;AAIA,WATA;AAUA,SAbA;;AAeA,KA3DA,EApDA,E","file":"pages/find/add-moment/add-moment.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/find/add-moment/add-moment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./add-moment.vue?vue&type=template&id=6d01c8d2&\"\nvar renderjs\nimport script from \"./add-moment.vue?vue&type=script&lang=js&\"\nexport * from \"./add-moment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/find/add-moment/add-moment.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-moment.vue?vue&type=template&id=6d01c8d2&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-moment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-moment.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"px-3\">\n\t\t<!-- 导航栏 -->\r\n\t\t<free-nav-bar showBack :showRight=\"true\" bgColor=\"bg-white\">\r\n\t\t\t<free-main-button name=\"发表\" slot=\"right\" @click=\"submit\"></free-main-button>\r\n\t\t</free-nav-bar>\r\n\t\t<!-- 文字 -->\r\n\t\t<textarea placeholder=\"这一刻的想法\" v-model=\"content\" class=\"p-2 font-md mb-3\"/>\r\n\t\t<!-- 图文 -->\r\n\t\t<free-upload-image :list=\"imageList\" v-if=\"type === 'image'\" @update=\"updateImage\"></free-upload-image>\r\n\t\t<!-- 视频 -->\r\n\t\t<view v-if=\"type === 'video' && !video\" class=\"flex align-center justify-center bg-light rounded\" style=\"height: 350rpx;\"\r\n\t\thover-class=\"bg-hover-light\" @click=\"uploadVideo\">\r\n\t\t\t<text class=\"text-muted\" style=\"font-size: 100rpx;\">+</text>\r\n\t\t</view>\r\n\t\t<video v-if=\"type === 'video' && video && video.src\" :src=\"video.src\" :poster=\"video.poster\" controls></video>\r\n\t\t<view v-if=\"type === 'video' && video && video.src\" class=\"my-3 flex align-center justify-center bg-light\" hover-class=\"bg-hover-light\" style=\"height: 100rpx;\" @click=\"uploadVideo\">\r\n\t\t\t<text class=\"font-md text-muted\">点击切换视频</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t<!-- <free-list-item title=\"所在位置\" showRight :showLeftIcon=\"false\">\r\n\t\t\t<text slot=\"right\" class=\"font-md\">位置</text>\r\n\t\t</free-list-item> -->\r\n\t\t<free-list-item title=\"提醒谁看\" showRight :showLeftIcon=\"false\" @click=\"openRemind\">\r\n\t\t\t<view slot=\"right\" class=\"flex\">\r\n\t\t\t\t<view class=\"ml-1\" v-for=\"(item,index) in remindList\" :key=\"index\">\r\n\t\t\t\t\t<free-avatar :src=\"item.avatar\" size=\"50\"></free-avatar>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</free-list-item>\r\n\t\t<free-list-item title=\"谁可以看\" showRight :showLeftIcon=\"false\" @click=\"openSee\">\r\n\t\t\t<text slot=\"right\" class=\"font-md\">{{seeText}}</text>\r\n\t\t</free-list-item>\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\timport freeNavBar from '@/components/free-ui/free-nav-bar.vue';\r\n\timport freeMainButton from '@/components/free-ui/free-main-button.vue';\r\n\timport freeListItem from \"@/components/free-ui/free-list-item.vue\"\r\n\timport freeUploadImage from '@/components/free-ui/free-upload-image.vue';\r\n\timport freeAvatar from '@/components/free-ui/free-avater.vue';\r\n\timport $H from '@/common/free-lib/request.js';\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tfreeNavBar,\r\n\t\t\tfreeMainButton,\r\n\t\t\tfreeListItem,\r\n\t\t\tfreeUploadImage,\r\n\t\t\tfreeAvatar\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcontent:\"\",\r\n\t\t\t\timageList:[],\r\n\t\t\t\ttype:\"image\",\r\n\t\t\t\tvideo:false,\r\n\t\t\t\t\r\n\t\t\t\tremindList:[],\r\n\t\t\t\t\r\n\t\t\t\tseeObj:{\r\n\t\t\t\t\tk:\"all\",\r\n\t\t\t\t\tv:[]\r\n\t\t\t\t}\n\t\t\t}\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.type = e.type\r\n\t\t\tuni.$on('sendResult',this.sendResult)\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\tuni.$off('sendResult',this.sendResult)\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tseeText() {\r\n\t\t\t\tlet type = {\r\n\t\t\t\t\tall:\"公开\",\r\n\t\t\t\t\tnone:\"私密\",\r\n\t\t\t\t\tonly:\"谁可以看\",\r\n\t\t\t\t\texcept:\"不给谁看\"\r\n\t\t\t\t}\r\n\t\t\t\tif(this.seeObj.k === 'all' || this.seeObj.k === 'none'){\r\n\t\t\t\t\treturn type[this.seeObj.k]\r\n\t\t\t\t}\r\n\t\t\t\tlet names = (this.seeObj.v.map(item=>item.name)).join(',')\r\n\t\t\t\treturn `${type[this.seeObj.k]}:${names}`\r\n\t\t\t},\r\n\t\t\tseeData(){\r\n\t\t\t\tif(this.seeObj.k === 'all' || this.seeObj.k === 'none'){\r\n\t\t\t\t\treturn this.seeObj.k\r\n\t\t\t\t}\r\n\t\t\t\tlet ids = (this.seeObj.v.map(item=>item.user_id)).join(',')\r\n\t\t\t\treturn `${this.seeObj.k}:${ids}`\r\n\t\t\t}\r\n\t\t},\n\t\tmethods: {\r\n\t\t\tsendResult(e){\r\n\t\t\t\tif(e.type === 'remind'){\r\n\t\t\t\t\tthis.remindList = e.data\r\n\t\t\t\t}\r\n\t\t\t\tif(e.type === 'see'){\r\n\t\t\t\t\tthis.seeObj = e.data\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topenRemind(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../mail/mail/mail?type=remind',\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\topenSee(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../mail/mail/mail?type=see',\r\n\t\t\t\t});\r\n\t\t\t},\n\t\t\tsubmit(){\r\n\t\t\t\t$H.post('/moment/create',{\r\n\t\t\t\t\tcontent:this.content,\r\n\t\t\t\t\timage:this.imageList.join(','),\r\n\t\t\t\t\tvideo:this.video ? JSON.stringify(this.video) : '',\r\n\t\t\t\t\ttype:this.type,\r\n\t\t\t\t\tlocation:\"\",\r\n\t\t\t\t\tremind:(this.remindList.map(item=>item.user_id)).join(','),\r\n\t\t\t\t\tsee:this.seeData,\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '发布成功',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 上传图片\r\n\t\t\tupdateImage(list){\r\n\t\t\t\tthis.imageList = list\r\n\t\t\t},\r\n\t\t\t// 上传视频\r\n\t\t\tuploadVideo(){\r\n\t\t\t\tuni.chooseVideo({\r\n\t\t\t\t\tmaxDuration:10,\r\n\t\t\t\t\tsuccess: (e) => {\r\n\t\t\t\t\t\t$H.upload('/upload',{\r\n\t\t\t\t\t\t\tfilePath:e.tempFilePath\r\n\t\t\t\t\t\t},(progress)=>{\r\n\t\t\t\t\t\t\tconsole.log('上传进度',progress);\r\n\t\t\t\t\t\t}).then(url=>{\r\n\t\t\t\t\t\t\tthis.video = {\r\n\t\t\t\t\t\t\t\tsrc:url,\r\n\t\t\t\t\t\t\t\tposter:url + '?x-oss-process=video/snapshot,t_10,m_fast,w_300,f_png'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}